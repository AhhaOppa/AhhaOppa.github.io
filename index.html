<!DOCTYPE html>
<html>
<head>
    <title>Google Form with LIFF</title>
    <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
</head>
<body>
    <h1>กรุณารอสักครู่...</h1>
    <script>
        function initializeLiff() {
            liff.init({ liffId: "2006423065-PpO36v2z" }) // Replace with your LIFF ID
                .then(() => {
                    if (liff.isLoggedIn()) {
                        liff.getProfile().then(profile => {
                            const userId = profile.userId;
                            const displayName = profile.displayName;
                            // Redirect to Google Apps Script with userId and displayName
                            window.location.href = `https://script.google.com/macros/s/AKfycbyCBSfUIFeLegj0BUWJURFGHWMy4wfnMNLFul_8Q8GPdhErdi0djaIt1uFN4oOySw40RA/exec?userId=${userId}&username=${displayName}`;
                        });
                    } else {
                        liff.login();
                    }
                })
                .catch(err => console.error(err));
        }
        initializeLiff();
    </script>
</body>
</html>
